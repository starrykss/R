---
title: "변수 타입(Variable Types)"
output: html_notebook
---

- 변수에는 여러 가지 타입(Type, 속성)이 있음.
- 함수에 따라 적용할 수 있는 변수 타입이 다르기 때문에 분석을 하기 전에 변수 타입이 무엇인지 확인해야 함.
- 함수를 실행했을 때 오류로 발생하거나 예상과는 다른 결과가 출력되면 변수 타입을 확인하고 함수에 맞게 변경해야 함.

##### **변수의 종류**

- 변수는 **연속 변수**와 **범주 변수**로 분류할 수 있음.
- 변수의 값이 똑같이 숫자로 되어 있더라도 변수 종류가 무엇인지에 따라 사용할 수 있는 분석 방법이 다름.

1. **연속 변수 - Numeric 타입**

- **연속 변수(Continuous Variable)** : 키, 몸무게, 소득처럼 연속적이고 크기를 의미하는 값으로 구성된 변수
- 숫자가 크기를 지니기 때문에 더하기 빼기, 평균 구하기 등 산술을 할 수 있음.
- 연속 변수는 '**양적 변수(Quantitative Variable)**'라고도 함.
- R에서 연속 변수는 '**numeric(뉴머릭)**'으로 표현됨.

2. **범주 변수 - Factor 타입**

- **범주 변수(Categorical Variable)** : 값이 대상을 분류하는 의미를 지니는 변수
- 예) 성별 변수는 남자는 1, 여자는 2로 각 범주를 분류함.
- 숫자의 크기를 의미하지 않기 때문에 더하거나 평균을 구하는 등 산술을 할 수 없음.
- 범주 변수는 숫자가 대상을 지칭하는 이름과 같은 역할을 하기 때문에 '**명목 변수(Nominal Variable)**'라고도 함.
- R에서 범주 변수는 '**factor(펙터)**'로 표현됨.

> **변수 타입 간 차이 알아보기**

- 변수 타입에 어떤 차이가 있는지 직접 분석하면서 확인해 보겠음.

1. **먼저 몇 개의 숫자로 구성된 numeric 타입 변수와 factor 타입 변수를 생성함. factor 타입 변수는 `factor()`를 이용해 만들 수 있음.**

```{r}
var1 <- c(1, 2, 3, 1, 2)           # numeric 변수 생성
var2 <- factor(c(1, 2, 3, 1, 2))   # factor 변수 생성
```

2. **생성한 두 변수를 출력해 어떤 차이가 있는지 살펴보겠음.**

```{r}
var1      # numeric 변수 출력
var2      # factor 변수 출력
```

- numeric 변수인 `var1`을 실행하면 변수에 들어 있는 값들이 한 줄로 출력되는 반면, factor 변수인 `var2`를 실행하면 두 줄이 출력됨.
- `var2` 출력 결과를 보면 첫 번째 줄에는 `var1`과 마찬가지로 변수에 들어 있는 값들이 출력되고, 두 번째 출에는 값이 어떤 범주로 구성되는지 의미하는 **Levels(인자)**가 출력됨.
- Levels를 보면 `var2`가 `1`, `2`, `3` 세 범주로 구성된다는 것을 알 수 있음.
- 이처럼 factor 변수는 값을 지니는 동시에 값의 범주를 의미하는 Levels 정보를 지니고 있음.

3. **factor 변수는 연산이 안된다**

- numeric 변수로는 연산할 수 있지만, factor 변수로는 연산할 수 없음.
- 두 변수로 간단한 연산을 해보겠음.

```{r}
var1+2  # numeric 변수로 연산
var2+2  # factor 변수로 연산
```

- `var1`은 연산 결과가 출력되지만 `var2`는 숫자형 문법을 적용할 수 없다는 경고 메시지가 출력됨.
- factor 변수는 데이터가 숫자로 되어 있지만 *크기가 아니라 범주를 의미*하기 때문에 연산할 수 없다는 것임.

4. **변수 타입 확인하기**

- `class()`를 이용하면 *변수 타입이 무엇인지 확인*할 수 있음.

```{r}
class(var1)
class(var2)
```

5. **factor 변수의 구성 범주 확인하기**

- `levels()`를 이용하면 factor 변수의 값이 어떤 범주로 구성되는지 알 수 있음.
- factor가 아닌 numeric 변수를 적용하면 출력할 값이 없다는 의미의 `NULL`이 출력됨.

```{r}
levels(var1)
levels(var2)
```

6. **문자로 구성된 factor 변수**

- factor 변수는 숫자로 구성될 수도 있지만 문자로 구성될 수도 있음.
- 문자 변수와 문자로 구성된 factor 변수를 만들어 출력하고 차이를 살펴보겠음.

```{r}
var3 <- c("a", "b", "b", "c")          # 문자 변수 생성
var4 <- factor(c("a", "b", "b", "c"))  # 문자로 된 factor 변수 생성

var3
var4
```

- `var3`을 실행하면 변수에 들어 있는 문자들이 한 줄로 출력됨.
- 반면, `var4`는 첫 번째 줄에는 변수에 들어 있는 문자들이 출력되고, 두 번째 줄에는 Levels가 출력됨.
- Levels를 보면 `var4`의 값이 `a`, `b`, `c` 세 범주로 구성된다는 것을 알 수 있음.

7. **`class()`로 변수의 타입을 확인하면 `var3`는 문자를 의미하는 character가 출력되는 반면, `var4`는 factor가 출력됨.**

```{r}
class(var3)
class(var4)
```

8. **함수마다 적용 가능한 변수 타입이 다르다**

- 함수마다 적용할 수 있는 변수 타입이 다름.
- 함수를 활용하려면 먼저 변수가 함수에 적용할 수 있는 타입인지 확인해야 함.
- 예) 평균을 구하는 함수 `mean()`은 numeric 변수에만 적용할 수 있음.
- factor 변수에 `mean()`을 적용하면 에러 메시지가 출력됨.
- `mean()`에 `var1`과 `var2`를 적용해 보겠음.
- `var1`은 numeric 타입이기 때문에 결과가 출력되지만, `var2`는 factor 타입이기 때문에 경고 메시지가 출력됨.

```{r}
mean(var1)
mean(var2)
```

> **변수 타입 바꾸기**

- 함수를 실행했는데 예상치 못한 결과가 나왔다면 변수가 함수에 적용할 수 있는 타입인지 확인해야 함.
- 타입이 맞지 않는다면 함수에 적용할 수 있도록 변환한 후 코드를 다시 실행하면 됨.

1. **변수의 타입을 변환하는 방법을 알아보겠음. 앞에서 생성한 `var2`는 숫자로 구성되어 있지만, factor 변수이기 때문에 `mean()`에 적용할 수 없었음. 이 경우 변수 타입을 numeric으로 변환해야 함. `as.numeric()`을 이용하면 *변수 타입을 numeric으로 변환*할 수 있음. 변환한 후 `mean()`을 적용하면 결과가 정상적으로 출력됨.**

```{r}
var2 <- as.numeric(var2)     # numeric 타입으로 변환
mean(var2)                   # 함수 재적용
```

2. **numeric 타입으로 변환했기 때문에 `class()`에 적용하면 numeric이 출력됨. factor 타입이 아니라서 범주를 지니지 않으므로 `levels()`에 적용하면 `NULL`이 출력됨.**

```{r}
class(var2)    # 타입 확인
levels(var2)  # 범주 확인
```

- `as.numeric()`처럼 `as.`로 시작하는 함수들은 *변수의 타입을 바꾸는 기능*을 함.
- 이런 함수들을 '**변환 함수(Coercion Function)**'라고 함.
- 변환 함수의 예
    - `as.numeric()` : numeric으로 변환
    - `as.factor()` : factor로 변환
    - `as.character()` : character로 변환
    - `as.Date()` : Date로 변환
    - `as.data.frame()` : Data Frame으로 변환
    
##### **다양한 변수 타입들**

- numeric, factor 외에도 다양한 변수 타입이 있고, 타입마다 활용 방식과 적용할 수 있는 함수가 다름.
- 함수를 적용했는데 예상과 다른 결과가 나타나면 함수에 적용할 수 있는 타입의 변수를 사용했는지 확인해야 함.
    - **numeric** : 실수 (1, 12.3)
    - **integer** : 정수 (1L, 23L)
    - **complex** : 복소수 (3 + 2i)
    - **character** : 문자 ("male", "%FEMALE#", "123")
    - **logical** : 논리 (TRUE, FALSE, T, F)
    - **factor** : 범주 (1, 2, a, b)
    - **Date** : 날짜 ("2014-04-16", "16/04/14")
    
> **Quiz : mpg 데이터를 이용해 분석해보기**

- `mpg` 데이터의 `drv` 변수는 자동차의 구동 방식을 나타낸다. `mpg` 데이터를 이용해 아래 문제를 해결해 보시오.

> ###### **Q1. `drv` 변수의 타입을 확인해 보시오.**

```{r}
library(ggplot2)
mpg <- as.data.frame(ggplot2::mpg)

class(mpg$drv)   # drv 변수의 타입 확인
```

> ###### **Q2. `drv` 변수를 `as.factor()`를 이용해 factor 타입으로 변환한 후 다시 타입을 확인해 보시오.**

```{r}
mpg$drv <- as.factor(mpg$drv)

class(mpg$drv)
```

> ###### **Q3. `drv`가 어떤 범주로 구성되는지 확인해 보시오.**

```{r}
levels(mpg$drv)     # 범주 확인
```

